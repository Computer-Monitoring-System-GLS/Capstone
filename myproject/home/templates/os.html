{% extends 'base.html' %}

{% block title %}OS Information - CMT{% endblock %}

{% block content %}
<div id="info">
    <p>Loading system information...</p>
</div>

<script>
    fetch('/system_info/')
        .then(response => response.json())
        .then(data => {
            const infoDiv = document.getElementById('info');  
            infoDiv.innerHTML = '';

            if (data['OS Info']) {
                const osInfoDiv = document.createElement('div');
                osInfoDiv.innerHTML = `
                    <h2>OS Info:</h2><br>
                    <p><strong>OS Name :</strong> ${data['OS Info']['OS Name'] || 'N/A'}</p><br>
                    <p><strong>OS Version :</strong> ${data['OS Info']['OS Version'] || 'N/A'}</p><br>
                    <p><strong>OS Architecture :</strong> ${data['OS Info']['OS Architecture'] || 'N/A'}</p><br>
                    <p><strong>Wi-Fi IPv4 Address :</strong> ${data['OS Info']['Wi-Fi IPv4 Address'] || 'N/A'}</p><br>
                    <p><strong>Manufacturer :</strong> ${data['OS Info']['Manufacturer'] || 'N/A'}</p><br>
                    <p><strong>Serial Number :</strong> ${data['OS Info']['Serial Number'] || 'N/A'}</p><br>
                    <p><strong>Install Date :</strong> ${data['OS Info']['Install Date'] || 'N/A'}</p><br>
                    <p><strong>Windows Security Center :</strong><br>
                    <p style="text-indent: 40px;"><strong>Firewall Name :</strong> ${data['OS Info']['Firewall Name'] || 'N/A'}</p>
                    <p style="text-indent: 40px;"><strong>Firewall Start Mode :</strong> ${data['OS Info']['Firewall StartMode'] || 'N/A'}</p>
                    <p style="text-indent: 40px;"><strong>Firewall Status :</strong> ${data['OS Info']['Firewall Status'] || 'N/A'}</p><br>
                    <p><strong>Windows AutoUpdate Status :</strong><br>
                    <p style="text-indent: 40px;"><strong>Caption :</strong> ${data['OS Info']['AutoUpdate Caption'] || 'N/A'}</p>
                    <p style="text-indent: 40px;"><strong>InstalledOn :</strong> ${data['OS Info']['AutoUpdate InstalledOn'] || 'N/A'}</p>
                    <p style="text-indent: 40px;"><strong>HotFixID :</strong> ${data['OS Info']['AutoUpdate HotFixID'] || 'N/A'}</p><br>
                    <p><strong>Battery :</strong><br>
                    <p style="text-indent: 40px;"><strong>Status :</strong> ${data['OS Info']['Battery Status'] || 'N/A'}</p>
                    <p style="text-indent: 40px;"><strong>Estimated Charging Remaining :</strong> ${data['OS Info']['Charging Remaining'] || 'N/A'}</p>
                `;
                infoDiv.appendChild(osInfoDiv);
            }

            if (!data['OS Info']) {
                const errorDiv = document.createElement('div');
                errorDiv.innerHTML = '<p>Unable to fetch system information.</p>';
                infoDiv.appendChild(errorDiv);
            }
        })
        .catch(error => {
            const infoDiv = document.getElementById('info');
            infoDiv.innerHTML = '<p>Failed to load system information. Please try again later.</p>';
            console.error(error);
        });
</script>
{% endblock %}
