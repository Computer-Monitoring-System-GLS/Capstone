{% extends 'base.html' %}

{% block title %}CPU Information - CMT{% endblock %}

{% block content %}
            <div id="info">
                <p>Loading system information...</p>
           </div>
           <script>
               // Fetch system information from the backend
               fetch('/system_info/')
                   .then(response => response.json())
                   .then(data => {
                       const infoDiv = document.getElementById('info');
       
                       // Clear loading message
                       infoDiv.innerHTML = '';
       
                       if (data['CPU Info']) {
                           const cpuInfoDiv = document.createElement('div');
                           cpuInfoDiv.innerHTML = `
                               <h2>CPU Info:</h2><br>
                               <p><strong>Name :</strong> ${data['CPU Info']['CPU Name'] || 'N/A'}</p><br>
                               <p><strong>Architecture :</strong> ${data['CPU Info']['CPU Architecture'] || 'N/A'}</p><br>
                               <p><strong>Socket Designation :</strong> ${data['CPU Info']['Socket Designation'] || 'N/A'}</p><br>
                               <p><strong>Number Of Cores :</strong> ${data['CPU Info']['Number Of Cores'] || 'N/A'}</p><br>
                               <p><strong>Number Of Logical Processors :</strong> ${data['CPU Info']['Number Of Logical Processors'] || 'N/A'}</p><br>
                               <p><strong>CPU Frequency :</strong> ${data['CPU Info']['Frequency'] || 'N/A'}</p><br>
                               <p><strong>Load Percentage :</strong> ${data['CPU Info']['Load Percentage'] || 'N/A'}</p><br>
                               <p><strong>Description :</strong> ${data['CPU Info']['Description'] || 'N/A'}</p><br>
                               <p><strong>Family :</strong> ${data['CPU Info']['Family'] || 'N/A'}</p><br>
                               <p><strong>Processor ID :</strong> ${data['CPU Info']['Processor ID'] || 'N/A'}</p><br>
                               <p><strong>Manufacturer :</strong> ${data['CPU Info']['Manufacturer'] || 'N/A'}</p><br>
                               <p><strong>Device ID :</strong> ${data['CPU Info']['Device ID'] || 'N/A'}</p><br>
                               <p><strong>Stock Core Speed :</strong> ${data['CPU Info']['Stock Core Speed'] || 'N/A'}</p><br>
                               <p><strong>Bus Speed :</strong> ${data['CPU Info']['Bus Speed'] || 'N/A'}</p><br>
                               <p><strong>Virtualization :</strong> ${data['CPU Info']['Virtualization'] || 'N/A'}</p><br>
                               <p><strong>L2 Cache Size :</strong> ${data['CPU Info']['L2 Cache Size'] || 'N/A'}</p><br>
                               <p><strong>L3 Cache Size : </strong> ${data['CPU Info']['L3 Cache Size'] || 'N/A'}</p>
                               {% comment %} <p><strong>CPU Temperature (Â°C):</strong> ${data['CPU Info']['CPU Temperature'] || 'N/A'}</p> {% endcomment %}
                           `;
                           infoDiv.appendChild(cpuInfoDiv);
                       }
                       // Handle potential error if no OS Info or CPU Info is available
                       if (!data['CPU Info']) {
                           const errorDiv = document.createElement('div');
                           errorDiv.innerHTML = '<p>Unable to fetch system information.</p>';
                           infoDiv.appendChild(errorDiv);
                       }
                   })
                   .catch(error => {
                       const infoDiv = document.getElementById('info');
                       infoDiv.innerHTML = '<p>Failed to load system information. Please try again later.</p>';
                       console.error(error);
                   });
           </script>
        </div>
    </main>
</body>
</html>
{% endblock %}